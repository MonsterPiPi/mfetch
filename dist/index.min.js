!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.Mfetch=e.Mfetch||{})}(this,function(e){"use strict";function t(e){return e&&e.__esModule?e.default:e}function n(e,t){return t={exports:{}},e(t,t.exports),t.exports}function r(e){return F.call(e).slice(8,-1)}function i(e){var t=e.map(function(e){return"["+e+"]"});return t[0]=e[0],t.join("")}function o(e){if(!O(e))throw new TypeError("Argument must be object");var t=new k,n=new b(e),o=function(e,n,r){var o=i(e);A(r)?t.append(o,n):t.append(o,n,r)};n.onStepInto=function(e){var t=(e.parent,e.node),n=r(t);switch(n){case"Array":return!0;case"Object":return!0;case"FileList":return!0;default:return!1}};for(var u=0,c=n;u<c.length;u+=1){var s=c[u],a=s.node,f=s.path,l=r(a);switch(l){case"Array":break;case"Object":break;case"FileList":break;case"File":o(f,a);break;case"Blob":o(f,a,a.name);break;default:o(f,a)}}return t}function u(e){for(var t={},n=0,r=e.keys();n<r.length;n+=1){var i=r[n];t.hasOwnProperty(i)?t[i]=e.getAll(i):t[i]=e.get(i)}return t}function c(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function s(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}function a(e,t){return t.encode?t.strict?G(e):encodeURIComponent(e):e}var f="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},l=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=t.isType=function(e){return function(t){return null!=t&&Object.prototype.toString.call(t)==="[object "+e+"]"}},r=(t.isFn=n("Function"),t.isArr=Array.isArray||n("Array")),i=t.isObj=n("Object");t.isStr=n("String"),t.isNum=n("Number"),t.isIter=function(e){return r(e)||i(e)}});t(l);var p=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.lowerCase=t.compose=t.reduce=t.each=t.extend=t.isValidThen=t.isValid=t.hasOwn=t.hasOwnProperty=t.obj=t.getStr=t.getFn=t.noop=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=l,i=t.noop=function(e){return function(){return e}},o=t.getFn=function(e,t){return(0,r.isFn)(e)?e:i(t)},u=t.getStr=function(e){return(0,r.isStr)(e)?e:""},c=(t.obj=function(){return Object.create(null)},t.hasOwnProperty=Object.prototype.hasOwnProperty),s=t.hasOwn=function(e,t){return c.call(e,t)},a=t.isValid=function(e){return void 0!==e&&null!==e},f=(t.isValidThen=function(e,t){return a(e)?e:t},t.extend=function(e,t){for(var n in t)e[n]=t[n];return e},t.each=function(e,t){if((0,r.isFn)(t))if((0,r.isArr)(e))for(var n=0,i=e.length;n<i&&t(e[n],n)!==!1;n++);else for(var o in e)if(s(e,o)&&t(e[o],o)===!1)break}),p=t.reduce=function(e,t,i){if((0,r.isFn)(t)){if((0,r.isArr)(e))return e.reduce(t,i);var o=function(){var n=i;return f(e,function(e,r){n=t(n,e,r)}),{v:n}}();return"object"===("undefined"==typeof o?"undefined":n(o))?o.v:void 0}};t.compose=function(){for(var e=arguments,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=e[r];return function(e){for(var t=arguments,r=arguments.length,i=Array(r>1?r-1:0),u=1;u<r;u++)i[u-1]=t[u];return p(n,function(e,t){return o(t).apply(void 0,[e].concat(i))},e)}},t.lowerCase=function(e){return u(e).toLowerCase()}});t(p);var d=l,h=p,v=function(e){function t(t,n,r){return l[t]?function(n){var i=new e(n);return l[t].call(i,n,(0,h.getFn)(r,n))}:function(t){var i=new e(t);return n.call(i,t,(0,h.getFn)(r,t))}}function n(e,r){if((0,d.isObj)(e))(0,h.each)(e,function(e,t){n(t,e)});else{if(e=(0,h.lowerCase)(p[e]?e:p["process"+e]?"process"+e:e),!(0,d.isFn)(r))return;p[e]||b.push(e),p[e]=t(e,r,p[e])}}function r(e){var t=p[e];return delete t[e],t}function i(e,t){(0,d.isStr)(e)&&(0,d.isFn)(t)?(0,h.hasOwn)(l,e)||(l[e]=t):(0,h.each)(e,function(e,t){i(t,e)})}function o(e){return e=(0,h.lowerCase)(e),p[e]||p["process"+e]}function u(e){return g[e]||(g[e]={name:((0,d.isArr)(e)?e:e.split(",")).filter(function(e){return o(e)})},g[e].path=g[e].name.join(",")),g[e]}function c(e,t,n){if((0,d.isStr)(e)){var r=u(e),i=r.name,c=r.path;if(i.length&&(p[c]=p[c]||h.compose.apply(null,i.map(function(e){return o(e)})),(0,d.isFn)(p[c])))return p[c](t)}return(0,h.isValidThen)(n,t)}function s(e,t){return(0,h.isValid)(t)?void(v[e]=t):v[e]}function a(e){return(0,h.isValid)(e)&&(0,h.reduce)(b,function(e,t){return c(t,e)},e)}function f(e){(0,d.isArr)(e)?(0,h.each)(e,function(e){return f(e)}):(0,d.isFn)(e)?e(y):n(e)}var l=(0,h.obj)(),p=(0,h.obj)(),v=(0,h.obj)(),g=(0,h.obj)(),b=[];e=(0,h.getFn)(e);var y={guard:i,process:n,remove:r,post:c,extension:f,cache:s,all:a};return e.prototype=(0,h.extend)(e.prototype,y),y},g=n(function(e,t){!function(n,r){"object"==typeof t&&"object"==typeof e?e.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof t?t.RecursiveIterator=r():n.RecursiveIterator=r()}(f,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var r=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},i=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},u=n(1),c=u.isObject,s=u.getKeys,a="__bypassMode",f="__ignoreCircular",l="__maxDeep",p="__cache",d="__queue",h="__state",v={},g=function(){function e(t){var n=void 0===arguments[1]?0:arguments[1],r=void 0!==arguments[2]&&arguments[2],i=void 0===arguments[3]?100:arguments[3];o(this,e),this[a]=n,this[f]=r,this[l]=i,this[p]=[],this[d]=[],this[h]=this.getState(void 0,t),this.__makeIterable()}return i(e,null,{next:{value:function(){var e=this[h]||v,t=e.node,n=e.path,i=e.deep;if(this[l]>i&&this.isNode(t))if(this.isCircular(t)){if(!this[f])throw new Error("Circular reference")}else if(this.onStepInto(this[h])){var o,u=this.getStatesOfChildNodes(t,n,i),c=this[a]?"push":"unshift";(o=this[d])[c].apply(o,r(u)),this[p].push(t)}var s=this[d].shift(),g=!s;return this[h]=s,g&&this.destroy(),{value:s,done:g}},writable:!0,configurable:!0},destroy:{value:function(){this[d].length=0,this[p].length=0,this[h]=null},writable:!0,configurable:!0},isNode:{value:function(e){return c(e)},writable:!0,configurable:!0},isLeaf:{value:function(e){return!this.isNode(e)},writable:!0,configurable:!0},isCircular:{value:function(e){return this[p].indexOf(e)!==-1},writable:!0,configurable:!0},getStatesOfChildNodes:{value:function(e,t,n){var r=this;return s(e).map(function(i){return r.getState(e,e[i],i,t.concat(i),n+1)})},writable:!0,configurable:!0},getState:{value:function(e,t,n){var r=void 0===arguments[3]?[]:arguments[3],i=void 0===arguments[4]?0:arguments[4];return{parent:e,node:t,key:n,path:r,deep:i}},writable:!0,configurable:!0},onStepInto:{value:function(e){return!0},writable:!0,configurable:!0},__makeIterable:{value:function(){var e=this;try{this[Symbol.iterator]=function(){return e}}catch(e){}},writable:!0,configurable:!0}}),e}();e.exports=g},function(e,t){function n(e){return null!==e&&"object"==typeof e}function r(e){if(!n(e))return!1;if(!("length"in e))return!1;var t=e.length;if(!i(t))return!1;if(t>0)return t-1 in e;for(var r in e)return!1}function i(e){return"number"==typeof e}function o(e){var t=Object.keys(e);if(u(e));else if(r(e)){var n=t.indexOf("length");n>-1&&t.splice(n,1)}else t=t.sort();return t}t.isObject=n,t.isArrayLike=r,t.isNumber=i,t.getKeys=o;var u=t.isArray=Array.isArray;Object.defineProperty(t,"__esModule",{value:!0})}])})}),b=t(g),y=function(e){return function(t){return Object.prototype.toString.call(t)==="[object "+e+"]"}},m=y("Function"),j=Array.isArray||y("Array"),O=y("Object"),w=y("String"),x=y("FormData"),A=y("Undefined"),C=y("Number"),S=function(e){return String(e).toLocaleLowerCase()},_=function(e){return S(e.method)},k=window.FormData,I=Object.prototype,F=I.toString,U=function(e){return S(String(e)).replace(/\s+/gi,"")},P=function(e,t){if(!e)return!1;var n=e.headers;return!(!n||!n["content-type"])&&(t=U(j(t)?t.join("/"):w(t)?t:""),n["content-type"].indexOf(t)>-1)},N=function(e,t){return e=Object.keys(e||{}).reduce(function(t,n){return t[U(n)]=U(e[n]),t},{}),Object.keys(t||{}).forEach(function(n){e[U(n)]=U(t[n])}),e},R=function(e,t,n){return Promise.resolve(t(e)).then(function(e){return n(e)})},E={processFetch:function(e,t){return e=t(e),fetch(e.url,e)},processRequest:function(e,t){var n=this;return R(e,t,function(e){if(C(e.timeout)){var t=e.timeout;return delete e.timeout,n.post("response",new Promise(function(r,i){setTimeout(function(){i(new Error('[serve-fetch Error] request "'+e.url+'" is timeout!'))},t),n.post("fetch",e).then(r,i)}))}return n.post("response",n.post("fetch",e))})}},T={request:function(e){return{processOption:function(t,n){return R(t,n,function(t){return m(e)?e(t):t})}}},response:function(e){return{processResponse:function(t,n){return R(t,n,function(t){return m(e)?e(t):t})}}}},q=function(e){return Object.keys(e||{}).reduce(function(t,n){return T[n]&&m(e[n])?t.concat(T[n](e[n].bind(e))):t},[])},M=function(e){return{processOption:function(t,n){switch(t=n(t),_(t)){case"get":case"head":return t;default:return t.body=e,t}}}},L=function(e){return{processOption:function(t,n){return t=n(t),t.headers=N(t.headers,e),t}}},V=n(function(e,t){!function(n,r){if("function"==typeof define&&define.amd)define(["exports","module"],r);else if("undefined"!=typeof t&&"undefined"!=typeof e)r(t,e);else{var i={exports:{}};r(i.exports,i),n.fetchJsonp=i.exports}}(f,function(e,t){function n(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function r(e){try{delete window[e]}catch(t){window[e]=void 0}}function i(e){var t=document.getElementById(e);document.getElementsByTagName("head")[0].removeChild(t)}function o(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=e,c=t.timeout||u.timeout,s=t.jsonpCallback||u.jsonpCallback,a=void 0;return new Promise(function(u,f){var l=t.jsonpCallbackFunction||n(),p=s+"_"+l;window[l]=function(e){u({ok:!0,json:function(){return Promise.resolve(e)}}),a&&clearTimeout(a),i(p),r(l)},o+=o.indexOf("?")===-1?"?":"&";var d=document.createElement("script");d.setAttribute("src",""+o+s+"="+l),d.id=p,document.getElementsByTagName("head")[0].appendChild(d),a=setTimeout(function(){f(new Error("JSONP request to "+e+" timed out")),r(l),i(p)},c)})}var u={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};t.exports=o})}),B=function(e){return{processOption:function(t,n){return t=n(t),t.method=S(e),t},processFetch:function(e,t){return"jsonp"==e.method?V(e.url,e):t(e)}}},D=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})},z=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable,K=s()?Object.assign:function(e,t){for(var n,r,i=arguments,o=c(e),u=1;u<arguments.length;u++){n=Object(i[u]);for(var s in n)z.call(n,s)&&(o[s]=n[s]);if(Object.getOwnPropertySymbols){r=Object.getOwnPropertySymbols(n);for(var a=0;a<r.length;a++)J.call(n,r[a])&&(o[r[a]]=n[r[a]])}}return o},G=D,H=K,Q=function(e){return e.split("?")[1]||""},W=function(e){var t=Object.create(null);return"string"!=typeof e?t:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach(function(e){var n=e.replace(/\+/g," ").split("="),r=n.shift(),i=n.length>0?n.join("="):void 0;r=decodeURIComponent(r),i=void 0===i?null:decodeURIComponent(i),void 0===t[r]?t[r]=i:Array.isArray(t[r])?t[r].push(i):t[r]=[t[r],i]}),t):t},X=function(e,t){var n={encode:!0,strict:!0};return t=H(n,t),e?Object.keys(e).sort().map(function(n){var r=e[n];if(void 0===r)return"";if(null===r)return a(n,t);if(Array.isArray(r)){var i=[];return r.slice().forEach(function(e){void 0!==e&&(null===e?i.push(a(n,t)):i.push(a(n,t)+"="+a(e,t)))}),i.join("&")}return a(n,t)+"="+a(r,t)}).filter(function(e){return e.length>0}).join("&"):""},Y={extract:Q,parse:W,stringify:X},Z=function(e){var t=document.createElement("a");return t.href=e,t},$=function(e){var t=e.query_string;return function(e,n){var r=Z(e);return r.search=t.stringify(n),r.href}},ee=function(e){var t=e.query_string;return function(e){return t.parse(t.extract(String(e)))}},te=function(e){var t=e.query_string,n=e.form_data;return function(e){var r={};return w(e)?t.parse(e):x(e)?n.parse(e):O(e)?e:r}},ne=function(e){var t=e.query_string,n=e.form_data;return function(e,r){var i=function(t){return P(e,t)};return i(["application","json"])?JSON.stringify(r):i(["multipart","formdata"])?n.formify(r):i(["application","x-www-form-urlencoded"])?t.stringify(r):void 0}},re=function(e,t){return Object.keys(e||{}).reduce(function(n,r){return t.indexOf(r)==-1&&(n[r]=e[r]),n},{})},ie=function(e,t){return Object.keys(e||{}).reduce(function(n,r){return t.indexOf(r)>-1&&(n[r]=e[r]),n},{})},oe=function(e,t){return function(n){for(var r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];return n(e.post("serializer",t)).apply(void 0,r)}},ue=function(e){return{processSerializer:function(e){return{query_string:{parse:Y.parse,stringify:Y.stringify,extract:Y.extract},form_data:{parse:u,formify:o}}},processOption:function(t,n){t=n(t);var r=t.uri?t.uri.varNames:[],i=oe(this,t);switch(e=i(te,e),t.url=t.uri?t.uri.fill(ie(e,r)):t.url,_(t)){case"get":case"jsonp":case"head":var o=Object.assign(i(ee,t.url),re(e,r));return t.url=i($,t.url,o),t;default:return t.body=i(ne,t,Object.assign(i(te,t.body),re(e,r))),t}}}},ce=function(e){return{processOption:function(t,n){return t=n(t),t.timeout=e,t}}},se=n(function(e){!function(t,n){"function"==typeof define&&define.amd?define("uri-templates",[],n):"undefined"!=typeof e&&e.exports?e.exports=n():t.UriTemplate=n()}(f,function(){function e(e){return encodeURI(e).replace(/%25[0-9][0-9]/g,function(e){return"%"+e.substring(3)})}function t(e){return e=e.replace(/%../g,""),encodeURIComponent(e)===e}function n(n){var r="";i[n.charAt(0)]&&(r=n.charAt(0),n=n.substring(1));var u="",c="",s=!0,a=!1,f=!1;"+"==r?s=!1:"."==r?(c=".",u="."):"/"==r?(c="/",u="/"):"#"==r?(c="#",s=!1):";"==r?(c=";",u=";",a=!0,f=!0):"?"==r?(c="?",u="&",a=!0):"&"==r&&(c="&",u="&",a=!0);for(var l=[],p=n.split(","),d=[],h={},v=0;v<p.length;v++){var g=p[v],b=null;if(g.indexOf(":")!=-1){var y=g.split(":");g=y[0],b=parseInt(y[1])}for(var m={};o[g.charAt(g.length-1)];)m[g.charAt(g.length-1)]=!0,g=g.substring(0,g.length-1);var j={truncate:b,name:g,suffices:m};d.push(j),h[g]=j,l.push(g)}var O=function(t){for(var n="",r=0,i=0;i<d.length;i++){var o=d[i],l=t(o.name);if(null==l||Array.isArray(l)&&0==l.length||"object"==typeof l&&0==Object.keys(l).length)r++;else if(n+=i==r?c:u||",",Array.isArray(l)){a&&(n+=o.name+"=");for(var p=0;p<l.length;p++)p>0&&(n+=o.suffices["*"]?u||",":",",o.suffices["*"]&&a&&(n+=o.name+"=")),n+=s?encodeURIComponent(l[p]).replace(/!/g,"%21"):e(l[p])}else if("object"==typeof l){a&&!o.suffices["*"]&&(n+=o.name+"=");var h=!0;for(var v in l)h||(n+=o.suffices["*"]?u||",":","),h=!1,n+=s?encodeURIComponent(v).replace(/!/g,"%21"):e(v),n+=o.suffices["*"]?"=":",",n+=s?encodeURIComponent(l[v]).replace(/!/g,"%21"):e(l[v])}else a&&(n+=o.name,f&&""==l||(n+="=")),null!=o.truncate&&(l=l.substring(0,o.truncate)),n+=s?encodeURIComponent(l).replace(/!/g,"%21"):e(l)}return n},w=function(e,n,r){if(c&&(e=e.substring(c.length)),1==d.length&&d[0].suffices["*"]){for(var i=d[0],o=i.name,f=i.suffices["*"]?e.split(u||","):[e],l=s&&e.indexOf("=")!=-1,p=1;p<f.length;p++){var e=f[p];l&&e.indexOf("=")==-1&&(f[p-1]+=(u||",")+e,f.splice(p,1),p--)}for(var p=0;p<f.length;p++){var e=f[p];s&&e.indexOf("=")!=-1&&(l=!0);var v=e.split(",");1==v.length?f[p]=v[0]:f[p]=v}if(a||l){for(var g=n[o]||{},b=0;b<f.length;b++){var y=e;if(!a||y){if("string"==typeof f[b]){var e=f[b],m=e.split("=",1)[0],e=e.substring(m.length+1);if(s){if(r&&!t(e))return;e=decodeURIComponent(e)}y=e}else{var e=f[b][0],m=e.split("=",1)[0],e=e.substring(m.length+1);if(s){if(r&&!t(e))return;e=decodeURIComponent(e)}f[b][0]=e,y=f[b]}if(s){if(r&&!t(m))return;m=decodeURIComponent(m)}void 0!==g[m]?Array.isArray(g[m])?g[m].push(y):g[m]=[g[m],y]:g[m]=y}}1==Object.keys(g).length&&void 0!==g[o]?n[o]=g[o]:n[o]=g}else{if(s)for(var b=0;b<f.length;b++){var v=f[b];if(Array.isArray(v))for(var j=0;j<v.length;j++){if(r&&!t(v[j]))return;v[j]=decodeURIComponent(v[j])}else{if(r&&!t(v))return;f[b]=decodeURIComponent(v)}}void 0!==n[o]?Array.isArray(n[o])?n[o]=n[o].concat(f):n[o]=[n[o]].concat(f):1!=f.length||i.suffices["*"]?n[o]=f:n[o]=f[0]}}else{for(var f=1==d.length?[e]:e.split(u||","),O={},p=0;p<f.length;p++){for(var w=0;w<d.length-1&&w<p&&!d[w].suffices["*"];w++);if(w!=p){for(var x=d.length-1;x>0&&d.length-x<f.length-p&&!d[x].suffices["*"];x--);d.length-x!=f.length-p?O[p]=w:O[p]=x}else O[p]=p}for(var p=0;p<f.length;p++){var e=f[p];if(e||!a){var v=e.split(","),l=!1;if(a){var e=v[0],o=e.split("=",1)[0],e=e.substring(o.length+1);v[0]=e;var i=h[o]||d[0]}else var i=d[O[p]],o=i.name;for(var b=0;b<v.length;b++)if(s){if(r&&!t(v[b]))return;v[b]=decodeURIComponent(v[b])}(a||i.suffices["*"])&&void 0!==n[o]?Array.isArray(n[o])?n[o]=n[o].concat(v):n[o]=[n[o]].concat(v):1!=v.length||i.suffices["*"]?n[o]=v:n[o]=v[0]}}}return 1};return{varNames:l,prefix:c,substitution:O,unSubstitution:w}}function r(e){if(!(this instanceof r))return new r(e);for(var t=e.split("{"),i=[t.shift()],o=[],u=[],c=[],s=[];t.length>0;){var a=t.shift(),f=a.split("}")[0],l=a.substring(f.length+1),p=n(f);u.push(p.substitution),c.push(p.unSubstitution),o.push(p.prefix),i.push(l),s=s.concat(p.varNames)}this.fill=function(e){if(e&&"function"!=typeof e){var t=e;e=function(e){return t[e]}}for(var n=i[0],r=0;r<u.length;r++){var o=u[r];n+=o(e),n+=i[r+1]}return n},this.fromUri=function(e,t){t=t||{};for(var n={},r=0;r<i.length;r++){var u=i[r];if(e.substring(0,u.length)!==u)return;if(e=e.substring(u.length),r>=i.length-1){if(""==e)break;return}var s=o[r];if(!s||e.substring(0,s.length)===s){for(var a=i[r+1],f=r;;){if(f==i.length-2){var l=e.substring(e.length-a.length);if(l!==a)return;var p=e.substring(0,e.length-a.length);e=l}else if(a){var d=e.indexOf(a),p=e.substring(0,d);e=e.substring(d)}else if(o[f+1]){var d=e.indexOf(o[f+1]);d===-1&&(d=e.length);var p=e.substring(0,d);e=e.substring(d)}else{if(i.length>f+2){f++,a=i[f+1];continue}var p=e;e=""}break}if(!c[r](p,n,t.strict))return}}return n},this.varNames=s,this.template=e}var i={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},o={"*":!0};return r.prototype={toString:function(){return this.template},fillFromObject:function(e){return this.fill(e)},test:function(e,t){return!!this.fromUri(e,t)}},r})}),ae=function(e){return{processOption:function(t,n){return t=n(t),t.url=e,t.uri=new se(String(e)),t}}},fe=function(e){return{processOption:function(t,n){return t=n(t),t.credentials=e||"include",t}}},le=Object.freeze({body:M,headers:L,method:B,params:ue,timeout:ce,url:ae,credentials:fe}),pe=[],de=function(e,t){return w(e)?t=Object.assign({url:e},t):O(e)&&(t=Object.assign(e,t)),Object.keys(t).reduce(function(e,n){return le[n]?e.concat(le[n](t[n])):(console.warn("[serve-fetch] No "+n+" plugins for serve-fetch!"),e)},[])},he=function(e){var t=v(),n={url:"/",method:"get",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}};return t.extension(E),t.extension(e),t.extension(pe),t.post("request",t.post("afterOption",t.post("option",t.post("beforeOption",n))))},ve=function(e,t){return he(de(e,t))},ge=function(e,t){if(m(e))return function(t){return Promise.resolve(e(t))};var n=de(e,t);return function(e){return he(n.concat(ue(e)))}},be=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];pe=pe.concat(e)},ye=function(e){pe=pe.concat(q(e))};e.fetch=ve,e.resource=ge,e.extension=be,e.interceptor=ye,Object.defineProperty(e,"__esModule",{value:!0})});